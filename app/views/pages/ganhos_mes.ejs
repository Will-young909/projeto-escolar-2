<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ganhos no Mês</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet" href="../css/infos.css">
  <link rel="icon" href="../imagens/Regimath_sem fundo cor preto2.png"/>
</head>

<body>
    <header>
    <a href="/">
      <img src="/imagens/RM_bordo.png" alt="Regimath Logo" class="logo">
    </a>
    <button class="subheader__back" onclick="history.back()">
      <i class="fas fa-arrow-left"></i> Voltar
    </button>
  </header>

  <main class="page page-ganhos">
    <h1>Ganhos no Mês</h1>

    <section class="ganhos-resumo">
      <p class="ganhos-resumo__mes"><%= resumo.mes %></p>
      <p class="ganhos-resumo__total">R$ <%= resumo.totalGanhos.toFixed(2) %></p>
      <p class="ganhos-resumo__info">
        <%= resumo.aulasConcluidas %> aulas concluídas • <%= resumo.aulasAgendadas %> aulas agendadas
      </p>
    </section>

    <section class="ganhos-filtros">
      <label class="ganhos-filtros__campo">
        <p>Período</p>
        <select>
          <option>Últimos 7 dias</option>
          <option selected>Último mês</option>
          <option>Últimos 3 meses</option>
          <option>Personalizado</option>
        </select>
      </label>
      <label class="ganhos-filtros__campo">
        <p>Tipo</p>
        <select>
          <option>Todos</option>
          <option>Aulas avulsas</option>
          <option>Assinaturas</option>
        </select>
      </label>
    </section>

    <section class="ganhos-cards">
      <article class="ganhos-card">
        <h2>Aulas Concluídas</h2>
        <p class="ganhos-card__valor">R$ <%= resumo.totalGanhos.toFixed(2) %></p>
        <p class="ganhos-card__detalhe"><%= resumo.aulasConcluidas %> aulas • ticket médio R$ <%= resumo.ticketMedio.toFixed(2) %></p>
      </article>
    </section>

    <section class="ganhos-lista">
      <h2>Movimentações</h2>

      <% if (movimentacoes && movimentacoes.length > 0) { %>
        <% movimentacoes.forEach(mov => { %>
          <article class="linha-mov">
            <section class="linha-mov__info">
              <strong><%= mov.titulo %></strong>
              <p><%= mov.data %> • <%= mov.hora %></p>
            </section>
            <section class="linha-mov__valor linha-mov__valor--positivo">
              + R$ <%= mov.valor.toFixed(2) %>
            </section>
          </article>
        <% }); %>
      <% } else { %>
        <p class="lista-vazia">Nenhuma movimentação neste período.</p>
      <% } %>
    </section>
</main>

</body>